(window.webpackJsonp=window.webpackJsonp||[]).push([[0],Array(42).concat([function(e,t,r){e.exports=r.p+"assets/images/17a09f942b52e7721ea5060620e1cf74.png"},function(e,t,r){e.exports=r.p+"assets/images/7f838150017a90327b53f7bbaa305d65.png"},function(e,t,r){e.exports=r.p+"assets/images/598c99bd49d037e1617b81369be5404d.png"},function(e,t,r){e.exports=r.p+"assets/images/0cd6904f5bdbe3dae6a1315ebe83ce3f.png"},function(e,t,r){e.exports=r.p+"assets/images/264e70d15ba079c178675a36e437572f.png"},function(e,t,r){e.exports=r.p+"assets/images/72ea82758eebd396f93dc7f72b7c965f.png"},function(e,t,r){e.exports=r.p+"assets/images/7ce4ef79f950e718f6b7c00d610b8cad.png"},function(e,t,r){e.exports=r.p+"assets/images/ae18dd55ad5278d3ba24ad43a023323a.png"},function(e,t,r){e.exports=r.p+"assets/images/3bc1fbf1ab91c3500a49bfd40031f39f.png"},function(e,t,r){e.exports=r.p+"assets/images/b9b13c9ab99f8fa3c958f8a7b0773c98.png"},function(e,t,r){e.exports=r.p+"assets/audio/353bed5d38b3e925139df35442fb753b.mp3"},function(e,t,r){e.exports=r.p+"assets/images/ca99af7855f5ce192bb28a1b36b96271.png"},function(e,t,r){e.exports=r.p+"assets/images/fdb698566e927c9a46691517a7f51202.png"},function(e,t,r){e.exports=r.p+"assets/images/11e7f1a4c584bd6a3ca4e26bcfafa39f.png"},function(e,t,r){e.exports=r.p+"assets/images/9d6e2eeac97910301a1c234c386e0ec1.png"},function(e,t,r){e.exports=r.p+"assets/images/173366a8aca177a82efae8b1a917004b.png"},function(e,t,r){e.exports=r.p+"assets/images/53fb62c59cc687685bef5874f406ee3e.png"},function(e,t,r){e.exports=r.p+"assets/images/364b9fe04ba4be55f5a40bc52c83b2c4.png"},function(e,t,r){e.exports=r.p+"assets/images/81140cc39e23fe6a0ee4f60cde2cc08c.png"},function(e,t,r){e.exports=r.p+"assets/images/3d635c01242f032171f4cf7a80f767c6.png"},function(e,t,r){e.exports=r.p+"assets/images/2f879b898621d92f81ba3d9975b30adb.png"},function(e,t,r){e.exports=r.p+"assets/images/76719d5d990138dfccfc01723244b7f2.png"},function(e,t,r){e.exports=r.p+"assets/images/ba207dbae209177ea592bc765c40bb61.png"},function(e,t,r){e.exports=r.p+"assets/images/dfb97f75e863e7cacab2296b527603cb.png"},function(e,t,r){e.exports=r.p+"assets/images/36005a02f3f12e6b4c43ea413b03f6e2.png"},function(e,t,r){e.exports=r.p+"assets/images/b10eaf076dc20f09799ad7959b59266e.png"},function(e,t,r){e.exports=r.p+"assets/images/43be3f0e4890dda9a0f11f8dbd2e5e13.png"},function(e,t,r){e.exports=r.p+"assets/images/338afcd2f68bcc4114c494ae94b6070c.png"},function(e,t,r){e.exports=r.p+"assets/images/e6625f45a5241ae27fb1bf3786a8c801.png"},function(e,t,r){e.exports=r.p+"assets/images/c7afb60179fd8f9c4ad8195316e5291a.png"},function(e,t,r){e.exports=r.p+"assets/images/11721d7603a38a33de7a7968c9159343.png"},function(e,t,r){e.exports=r.p+"assets/images/93e8b7889cde90e90e26bb86580e08e2.png"},function(e,t,r){e.exports=r.p+"assets/images/8825628830b655efb805213ff08b241e.png"},function(e,t,r){e.exports=r.p+"assets/images/1348f05457f5e40e5373665b35f573ea.png"},function(e,t,r){e.exports=r.p+"assets/images/e2d2b3ab9ced9fc6608b44a95a0d1dd8.png"},function(e,t,r){e.exports=r.p+"assets/images/0c6d5cda489f59ae2ae064fd87565546.png"},function(e,t,r){e.exports=r.p+"assets/images/92cb767dd88bc1fa915a794d80d9f1aa.png"},function(e,t,r){e.exports=r.p+"assets/images/f7133ea7d8b9d026ebe0296c6bdab6bf.png"},function(e,t,r){e.exports=r.p+"assets/images/41a40fe94998538d241fa9be84a147aa.png"},function(e,t,r){e.exports=r.p+"assets/images/2963ddb0254c540e983e00d39a18bbca.png"},function(e,t,r){e.exports=r.p+"assets/images/0d67bc5afe73c2438d40bcfc206d3121.png"},function(e,t,r){e.exports=r.p+"assets/images/0e39274e5c297cc2f10aa25d7c3567b2.png"},function(e,t,r){e.exports=r.p+"assets/images/1582d811f8a98da45982815e990104a1.png"},function(e,t,r){e.exports=r.p+"assets/images/cdd39d6a5c8f17cfcbabb969fa635414.png"},function(e,t,r){e.exports=r.p+"assets/images/9427b77b4ab96964c236103edeb9dc8d.png"},function(e,t,r){e.exports=r.p+"assets/images/d611d563e53bd65f7971d0748f75d5f9.png"},function(e,t,r){e.exports=r.p+"assets/images/5eed1eb71f0835968733519735efc76e.png"},function(e,t,r){e.exports=r.p+"assets/images/df467bbbe6f2444e462c328a19050795.png"},function(e,t,r){e.exports=r.p+"assets/images/3bdf7c454a1afa0c1606260ccddfbc84.png"},function(e,t,r){e.exports=r.p+"assets/images/42826a9c33ed99577f26b7fde29631c9.png"},function(e,t,r){e.exports=r.p+"assets/images/aac8c26b4969379b40d05f74e1ee6759.png"},function(e,t,r){e.exports=r.p+"assets/images/6aefb7e2c3f5f9f38c89274ee8c2b6d2.png"},function(e,t,r){e.exports=r.p+"assets/images/c36916a4e2baa866094d71c686bb7bff.png"},function(e,t,r){e.exports=r.p+"assets/images/b46c7b70ca343b642df71e3936720617.png"},function(e,t,r){e.exports=r.p+"assets/images/a92397a12b9faaf03b391dc666987c6c.png"},function(e,t,r){e.exports=r.p+"assets/images/2ce4ab7cbea5a9627d9e5cf2934b75ac.png"},function(e,t,r){e.exports=r.p+"assets/images/620884d713bd48ca2d5b9f3857694547.png"},function(e,t,r){e.exports=r.p+"assets/images/f891a013f4403b4754ef023cf45ab4e9.png"},function(e,t,r){e.exports=r.p+"assets/images/7b29466475ead9d931bbf95772c8065b.png"},function(e,t,r){e.exports=r.p+"assets/images/9bfd8b8a912eddf3cf22ef7611c1e34d.png"},function(e,t,r){e.exports=r.p+"assets/images/897a6c759d49cd7fefa2c707eec6167a.png"},function(e,t,r){e.exports=r.p+"assets/images/dbf5a520a88890d31a16a4ec3174d4f5.png"},function(e,t,r){e.exports=r.p+"assets/images/da05990587f840dfed3aa1a4e6c00c40.png"},function(e,t,r){e.exports=r.p+"assets/images/3a7d8343ca794fa4688f6758b58aa957.png"},function(e,t,r){e.exports=r.p+"assets/audio/e5bb5fe503796a7494c4526a16ea8a20.wav"},function(e,t,r){e.exports=r.p+"assets/audio/e5bb5fe503796a7494c4526a16ea8a20.wav"},function(e,t,r){e.exports=r.p+"assets/audio/6f2eb51e7853dc18cef49835d37dbde5.wav"},function(e,t,r){e.exports=r.p+"assets/audio/e5bb5fe503796a7494c4526a16ea8a20.wav"},function(e,t,r){e.exports=r.p+"assets/audio/2323526a4a287ab969a75ba6481a4760.wav"},function(e,t,r){e.exports=r.p+"assets/audio/c174550cc7d84611a7588b57bd23fc0f.wav"},function(e,t,r){e.exports=r.p+"assets/images/ae79c4fa3f9ffc8199a38b1cda20feff.png"},function(e,t,r){e.exports=r.p+"assets/images/32b1ad53ca02a15f6b6bbd1f5812b065.png"},function(e,t,r){e.exports=r.p+"assets/images/4c8918b32ef23f1b3b7b0b38b2e3b16c.png"},function(e,t,r){e.exports=r.p+"assets/images/8f2a99cd9373ee0622f27e94ea2aa501.png"},function(e,t,r){e.exports=r.p+"assets/images/f33512e165b2de4fb3b71f9554a734f4.png"},function(e,t,r){e.exports=r.p+"assets/images/5e403c558f990ad7ead8fc6fb215b503.png"},function(e,t,r){e.exports=r.p+"assets/images/bfcec35590cd30bf127d33ef2e6e6ed1.png"},function(e,t,r){e.exports=r.p+"assets/images/ab35d403f3da9fea9629fbc81c530822.png"},function(e,t,r){e.exports=r.p+"assets/images/45dafc31ba5fb563f6dcd2f7241cac00.png"},function(e,t,r){e.exports=r.p+"assets/images/81e133472b1a6bddbbae73ae9c6fd22b.png"},function(e,t,r){e.exports=r.p+"assets/images/4ca0ee4b4c7a52eb0ba54e1623aee671.png"},function(e,t,r){e.exports=r.p+"assets/images/2cfda0b921b26f154472c84c00bc359c.png"},,,,,,,,,,,,,,function(e,t,r){},,,,,,,,,,,,,,,,function(e,t,r){"use strict";r.r(t);r(1),r(137);var a=r(42),s=r.n(a),n=r(43),o=r.n(n),i=r(44),p=r.n(i),c=r(45),l=r.n(c),y=r(46),u=r.n(y),m=r(47),f=r.n(m),E=r(48),d=r.n(E),h=r(49),g=r.n(h),v=r(50),b=r.n(v),A=r(51),O=r.n(A),x=r(52),_=r.n(x),T=r(53),L=r.n(T),S=r(54),w=r.n(S),R=r(55),P=r.n(R),I=r(56),C=r.n(I),Y=r(57),M=r.n(Y),j=r(58),D=r.n(j),H=r(59),F=r.n(H),G=r(60),N=r.n(G),k=r(61),U=r.n(k),X=r(62),W=r.n(X),K=r(63),V=r.n(K),B=r(64),J=r.n(B),z=r(65),q=r.n(z),$=r(66),Z=r.n($),Q=r(67),ee=r.n(Q),te=r(68),re=r.n(te),ae=r(69),se=r.n(ae),ne=r(70),oe=r.n(ne),ie=r(71),pe=r.n(ie),ce=r(72),le=r.n(ce),ye=r(73),ue=r.n(ye),me=r(74),fe=r.n(me),Ee=r(75),de=r.n(Ee),he=r(76),ge=r.n(he),ve=r(77),be=r.n(ve),Ae=r(78),Oe=r.n(Ae),xe=r(79),_e=r.n(xe),Te=r(80),Le=r.n(Te),Se=r(81),we=r.n(Se),Re=r(82),Pe=r.n(Re),Ie=r(83),Ce=r.n(Ie),Ye=r(84),Me=r.n(Ye),je=r(85),De=r.n(je),He=r(86),Fe=r.n(He),Ge=r(87),Ne=r.n(Ge),ke=r(88),Ue=r.n(ke),Xe=r(89),We=r.n(Xe),Ke=r(90),Ve=r.n(Ke),Be=r(91),Je=r.n(Be),ze=r(92),qe=r.n(ze),$e=r(93),Ze=r.n($e),Qe=r(94),et=r.n(Qe),tt=r(95),rt=r.n(tt),at=r(96),st=r.n(at),nt=r(97),ot=r.n(nt),it=r(98),pt=r.n(it),ct=r(99),lt=r.n(ct),yt=r(100),ut=r.n(yt),mt=r(101),ft=r.n(mt),Et=r(102),dt=r.n(Et),ht=r(103),gt=r.n(ht),vt=r(104),bt=r.n(vt),At=r(105),Ot=r.n(At),xt=r(106),_t=r.n(xt),Tt=r(107),Lt=r.n(Tt),St=r(108),wt=r.n(St),Rt=r(109),Pt=r.n(Rt),It=r(110),Ct=r.n(It),Yt=r(111),Mt=r.n(Yt),jt=r(112),Dt=r.n(jt),Ht=r(113),Ft=r.n(Ht),Gt=r(114),Nt=r.n(Gt),kt=r(115),Ut=r.n(kt),Xt=r(116),Wt=r.n(Xt),Kt=r(117),Vt=r.n(Kt),Bt=r(118),Jt=r.n(Bt),zt=r(119),qt=r.n(zt),$t=r(120),Zt=r.n($t),Qt=r(121),er=r.n(Qt),tr=r(122),rr=r.n(tr),ar=r(123),sr=r.n(ar),nr=[o.a,s.a,p.a,l.a,u.a,f.a,d.a,g.a,b.a,O.a,_.a,L.a,w.a,P.a,C.a,M.a,D.a,F.a,N.a,U.a,W.a,V.a,J.a,q.a,Z.a,ee.a,re.a,oe.a,se.a,pe.a,le.a,ue.a,fe.a,de.a,ge.a,be.a,Oe.a,_e.a,Le.a,we.a,Pe.a,Ce.a,Me.a,De.a,Fe.a,Ue.a,Ne.a,qe.a,Je.a,Ve.a,We.a,Ze.a,et.a,rt.a,st.a,ot.a,pt.a,lt.a,ut.a,ft.a,dt.a,gt.a,bt.a,Ot.a,_t.a,Lt.a,wt.a,Pt.a,Ct.a,Mt.a,Dt.a,Ft.a,Nt.a,Ut.a,Wt.a,Vt.a,Jt.a,qt.a,Zt.a,er.a,rr.a,sr.a].map((function(e){return new Promise((t,r)=>{if(e.includes("audio")){var a=new Audio(e);a.addEventListener("canplaythrough",()=>t(a)),a.addEventListener("error",()=>r(new Error("Failed to play audio: ".concat(e))))}else{var s=new Image;s.addEventListener("load",()=>t(s)),s.addEventListener("error",()=>{r(new Error("Failed to load image's URL: ".concat(e)))}),s.src=e}})})),or=(r(2),r(0)),ir=r.n(or),pr="PLAYER_FACES_LEFT",cr="ENEMY_FACES_LEFT",lr=["MODE_PLAY_GAME_INTRODUCTION","MODE_LOAD_GAME","MODE_ABOUT_GAME"],yr=function(){for(var e=arguments.length,t=new Array(e),r=0;r<e;r++)t[r]=arguments[r];return e=>t.reduceRight((e,t)=>t(e),e)},ur=e=>t=>e===t,mr=e=>(t,r)=>r!==e,fr=(e,t)=>r=>{((e,t,r)=>{var{menu:a,layers:s}=r,n=lr.findIndex(ur(a));s.forEach(((e,t)=>(r,a)=>{e.drawImage(t[a],r.x,r.y),e.drawImage(t[a],r.x+t[a].width,r.y)})(e,t)),((e,t,r)=>{e.drawImage(t[3],0,0),e.drawImage(t[4],0,0),e.drawImage(t[5],465,395+r*t[5].height-4*r)})(e,t,n)})(e,t,r)},Er=(r(41),(e,t,r)=>{((e,t,r)=>{e.drawImage(t[6+r],0,0)})(e,t,r.noiseCount),(e=>{e.fillStyle="rgba(25,61,65,0.4)",e.fillRect(0,0,1152,768)})(e),function(e,t){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"rgba(20, 120, 100, 0.8)",a=()=>{e.font="18px PixelFont",e.textAlign="left",e.fillStyle=r,t.split("\n").forEach((t,r)=>e.fillText(t,140,140+27*r))};document.fonts.load('20px "PixelFont"').then(a)}(e,"".concat(r.msg,"▉")),function(e,t){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"rgba(20, 120, 100, 0.8)";e.textAlign="left",e.fillStyle=r,e.font="25px PixelFont",e.fillText(t,870,130)}(e,r.text[r.mode].next),function(e,t){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"rgba(20, 120, 100, 0.8)";e.textAlign="left",e.fillStyle=r,e.font="25px PixelFont",e.fillText(t,140,130)}(e,r.text[r.mode].header),e.drawImage(t[11],0,0)}),dr=(e,t)=>r=>{Er(e,t,r)};function hr(){var e=Array.from({length:15},(e,t)=>[256*t,76,256,180]).reverse(),t=[...e].reverse(),r=[[88,132,88,124],[344,132,88,124],[600,136,88,120],[844,136,80,120],[1092,120,140,136],[1356,112,136,144],[1616,108,144,148],[1876,132,88,124]],a=r.reverse().reduce((e,t)=>{var[r,a,s,n]=t;return[...e,[2048-r-s,a,s,n]]},[]),s=[[72,128,88,128],[340,120,88,136],[600,108,88,148],[856,100,104,156],[1112,96,104,156],[1364,92,116,164],[1620,96,112,160],[1876,100,104,156],[2128,100,104,156],[2388,108,112,148],[2644,112,104,144],[2900,120,80,137]],n=s.reverse().reduce((e,t)=>{var[r,a,s,n]=t;return[...e,[3072-r-s,a,s,n]]},[]),o=[[87,132,88,123],[339,144,92,112],[596,152,92,104],[864,119,84,129],[1120,100,84,129],[1376,88,83,129]],i=o.reduce((e,t)=>{var[r,a,s,n]=t;return[...e,[1536-r-s,a,s,n]]},[]),p=[[76,116,84,140],[328,128,84,124],[584,132,84,124],[842,96,80,132],[1104,68,77,144],[1352,68,84,136]],c=p.reduce((e,t)=>{var[r,a,s,n]=t;return[...e,[1536-r-s,a,s,n]]},[]);return{matchAsset:{PLAYER_IDLE_LEFT:13,PLAYER_IDLE_RIGHT:14,PLAYER_WALK_LEFT:15,PLAYER_WALK_RIGHT:16,PLAYER_JUMP_RIGHT:18,PLAYER_JUMP_LEFT:17,PLAYER_ATTACK_LEFT:19,PLAYER_ATTACK_RIGHT:20,PLAYER_DEATH_RIGHT:56,PLAYER_DEATH_LEFT:57,PLAYER_SOLDIER_IDLE_LEFT:36,PLAYER_SOLDIER_IDLE_RIGHT:37,PLAYER_SOLDIER_ATTACK_RIGHT:35,PLAYER_SOLDIER_ATTACK_LEFT:34,PLAYER_SOLDIER_JUMP_LEFT:40,PLAYER_SOLDIER_JUMP_RIGHT:41,PLAYER_SOLDIER_DEATH_LEFT:58,PLAYER_SOLDIER_DEATH_RIGHT:59,PLAYER_SOLDIER_WALK_LEFT:38,PLAYER_SOLDIER_WALK_RIGHT:39,PLAYER_WATCHER_IDLE_RIGHT:49,PLAYER_WATCHER_IDLE_LEFT:50,PLAYER_WATCHER_WALK_RIGHT:47,PLAYER_WATCHER_WALK_LEFT:48,PLAYER_WATCHER_ATTACK_LEFT:46,PLAYER_WATCHER_ATTACK_RIGHT:45,PLAYER_SUMMON_LEFT:51,PLAYER_SUMMON_RIGHT:52,PLAYER_SUMMON_WATCHER_LEFT:53,PLAYER_SUMMON_WATCHER_RIGHT:54,PLAYER_HURT_RIGHT:60,PLAYER_HURT_LEFT:61,PLAYER_SOLDIER_HURT_RIGHT:62,PLAYER_SOLDIER_HURT_LEFT:63,BULLET:26,ITEMS:71,EXPLOSION:25,ENEMIES:{TYPE_1:{LEFT:28,RIGHT:27},TYPE_2:{RIGHT:73,LEFT:73,ATTACK_LEFT:73,ATTACK_RIGHT:73},TYPE_3:{RIGHT:77,LEFT:77,ATTACK_LEFT:77,ATTACK_RIGHT:77}},ELEVATOR:44,LASER:55,DOOR:72,WATCHER:81},spriteSheet:{PLAYER_IDLE_RIGHT:Array.from({length:6},(e,t)=>[72+256*t,120,92,136]),PLAYER_IDLE_LEFT:Array.from({length:6},(e,t)=>[96+256*t,120,92,136]),PLAYER_WALK_LEFT:Array.from({length:10},(e,t)=>[92+256*t,124,92,132]).reverse(),PLAYER_WALK_RIGHT:Array.from({length:10},(e,t)=>[72+256*t,124,92,132]),PLAYER_ATTACK_RIGHT:[...s],PLAYER_ATTACK_LEFT:[...n],PLAYER_JUMP_RIGHT:[...p],PLAYER_JUMP_LEFT:[...c],PLAYER_SOLDIER_IDLE_RIGHT:Array.from({length:6},(e,t)=>[89+256*t,128,92,128]),PLAYER_SOLDIER_IDLE_LEFT:Array.from({length:6},(e,t)=>[80+256*t,128,92,128]).reverse(),PLAYER_SOLDIER_WALK_RIGHT:Array.from({length:9},(e,t)=>[88+257*t,128,93,124]),PLAYER_SOLDIER_WALK_LEFT:Array.from({length:9},(e,t)=>[81+257*t,128,93,124]).reverse(),PLAYER_SOLDIER_ATTACK_RIGHT:[...r],PLAYER_SOLDIER_ATTACK_LEFT:[...a],PLAYER_SOLDIER_JUMP_RIGHT:[...o],PLAYER_SOLDIER_JUMP_LEFT:[...i],PLAYER_HURT_RIGHT:Array.from({length:4},(e,t)=>[53+264*t,128,109,128]),PLAYER_HURT_LEFT:Array.from({length:4},(e,t)=>[84+264*t,128,109,128]).reverse(),PLAYER_SOLDIER_HURT_RIGHT:Array.from({length:6},(e,t)=>[88+256*t,132,100,124]),PLAYER_SOLDIER_HURT_LEFT:Array.from({length:6},(e,t)=>[75+256*t,132,100,124]).reverse(),PLAYER_WATCHER_IDLE_RIGHT:Array.from({length:6},(e,t)=>[44+256*t,88,82,88]),PLAYER_WATCHER_IDLE_LEFT:Array.from({length:6},(e,t)=>[132+256*t,88,82,88]).reverse(),PLAYER_WATCHER_WALK_RIGHT:Array.from({length:6},(e,t)=>[44+256*t,75,96,110]),PLAYER_WATCHER_WALK_LEFT:Array.from({length:6},(e,t)=>[88+256*t,75,96,110]).reverse(),PLAYER_SUMMON_LEFT:Array.from({length:13},(e,t)=>[95+256*t,121,84,134]).reverse(),PLAYER_SUMMON_RIGHT:Array.from({length:13},(e,t)=>[72+256*t,121,84,134]),PLAYER_DEATH_RIGHT:Array.from({length:10},(e,t)=>[72+256*t,111,208,145]),PLAYER_DEATH_LEFT:Array.from({length:10},(e,t)=>[40+256*t,111,208,145]).reverse(),PLAYER_SOLDIER_DEATH_RIGHT:[...e],PLAYER_SOLDIER_DEATH_LEFT:[...t],PLAYER_SUMMON_WATCHER_RIGHT:Array.from({length:14},(e,t)=>[3+256*t,86,256,83]),PLAYER_SUMMON_WATCHER_LEFT:Array.from({length:14},(e,t)=>[132+256*t,86,256,83]).reverse(),PLAYER_WATCHER_ATTACK_RIGHT:Array.from({length:17},(e,t)=>[44+256*t,79,241,108]),PLAYER_WATCHER_ATTACK_LEFT:Array.from({length:17},(e,t)=>[4+256*t,79,241,108]).reverse(),BULLET:[396,193,18,18],AMMO:[184,701,74,75],COMPUTER:[249,200,75,75],MEDICIN:[393,0,75,75],WATCHER:[0,0,75,75],ELEVATOR:Array.from({length:4},(e,t)=>[0,t<2?14:78,192,36]),LASER:Array.from({length:9},(e,t)=>[96*t,0,96,288]),DOOR:Array.from({length:8},(e,t)=>[0+t%2*192,t<4?0:192,192,192]),EXPLOSION:Array.from({length:12},(e,t)=>[96*t,0,96,96]),HELMETS:Array.from({length:6},(e,t)=>[64*t,323,64,60]),ARMOURS:Array.from({length:6},(e,t)=>[64*t,451,64,60]),GUNS:Array.from({length:6},(e,t)=>[64*t,97,64,45]),ENEMIES:{TYPE_1:{RIGHT:Array.from({length:7},(e,t)=>[26+163*t,15,96,111]),LEFT:Array.from({length:7},(e,t)=>[26+161*t,15,96,111]).reverse()},TYPE_2:{RIGHT:Array.from({length:8},(e,t)=>[5+142*t,13,142,127]),LEFT:Array.from({length:8},(e,t)=>[10+142*t,160,142,127]).reverse(),ATTACK_RIGHT:[[5,299,142,127]],ATTACK_LEFT:[[439,299,142,127]]},TYPE_3:{RIGHT:Array.from({length:8},(e,t)=>[5+142*t,13,142,127]),LEFT:Array.from({length:8},(e,t)=>[10+142*t,160,142,127]).reverse(),ATTACK_RIGHT:[[5,299,142,127]],ATTACK_LEFT:[[439,299,142,127]]}}}}}var{matchAsset:gr,spriteSheet:vr}=hr();function br(e,t){var{x:r,y:a}=e,s=arguments.length>2&&void 0!==arguments[2]?arguments[2]:576,n=arguments.length>3&&void 0!==arguments[3]?arguments[3]:384,o=r,i=a;return t.x<=r&&t.y<=a?(o=s-Math.abs(r-t.x),i=n-Math.abs(a-t.y)):t.x>=r&&t.y<=a?(i=n-Math.abs(a-t.y),o=s+Math.abs(r-t.x)):t.x<=r&&t.y>=a?(o=s-Math.abs(r-t.x),i=n+Math.abs(a-t.y)):t.x>=r&&t.y>=a&&(o=s+Math.abs(r-t.x),i=n+Math.abs(a-t.y)),[o,i]}var Ar=(e,t,r)=>{var a,{player:s}=r,n=Math.floor(s.spriteCount),o=n<vr[s.state].length?n:0,[i,p,c,l]=vr[s.state][o],y=s.x-(626-c/2),u=s.y-384;a=(a=y<0?0:y)+1152>t[r.level[r.player.currentScreen].background2].width?t[r.level[r.player.currentScreen].background2].width-1152:a;var m,f,E=u<0?0:u;(E=E+768>t[r.level[r.player.currentScreen].background2].height?t[r.level[r.player.currentScreen].background2].height-768:E,f=y<0?s.x:y+1152>t[r.level[r.player.currentScreen].background2].width?s.x-a:626-c/2,m=u<0?s.y:u+768>t[r.level[r.player.currentScreen].background2].height?s.y-E:384,e.drawImage(t[r.level[r.player.currentScreen].background2],.7*a,E,1152,768,0,0,1152,768),e.drawImage(t[r.level[r.player.currentScreen].background1],.8*a,E,1152,768,0,0,1152,768),r.level[r.player.currentScreen].actionItems.length&&r.level[r.player.currentScreen].actionItems.forEach(r=>{var a="DOOR"===r.img?vr.DOOR[Math.floor(r.spriteCount)]:vr[r.img][Math.floor(r.spriteCount)];e.drawImage("DOOR"===r.img?t[gr.DOOR]:t[gr[r.img]],...a,...br({x:s.x,y:s.y},r,f,m),r.w,r.h)}),r.level[r.player.currentScreen].enemies.length)&&[...r.level[r.player.currentScreen].enemies].forEach(r=>{var a=vr.ENEMIES[r.type][r.state][Math.floor(r.spriteCount)];e.drawImage(t[gr.ENEMIES[r.type][r.state]],...a,...br({x:s.x,y:s.y},r,f,m),r.w,r.h)});if(r.level[r.player.currentScreen].items.length&&r.level[r.player.currentScreen].items.forEach(r=>{if(!["MESSAGE","LEVEL","SAVE_GAME"].includes(r.type)){var a=vr[r.type];e.drawImage(t["WATCHER"===r.type?gr.WATCHER:gr.ITEMS],...a,...br({x:s.x,y:s.y},r,f,m),r.w,r.h)}}),e.drawImage(t[gr[s.state]],i,p,c,l,f,m,c,l),s.remoteActive){var d=Math.floor(s.remote.spriteCount),[h,g,v,b]=vr[s.remote.state][d];s.remote.state.startsWith("PLAYER_WATCHER_ATTACK")&&s.remote.faces===pr?e.drawImage(t[gr[s.remote.state]],h,g,v,b,...br({x:s.x,y:s.y},{x:s.remote.x-128,y:s.remote.y},f,m),v,b):e.drawImage(t[gr[s.remote.state]],h,g,v,b,...br({x:s.x,y:s.y},{x:s.remote.x,y:s.remote.y},f,m),v,b)}(r.level[r.player.currentScreen].explosions.length&&r.level[r.player.currentScreen].explosions.forEach(r=>r.status&&e.drawImage(t[gr.EXPLOSION],...vr.EXPLOSION[Math.floor(r.spriteCount)],...br({x:s.x,y:s.y},r,f,m),r.w,r.h)),r.level[r.player.currentScreen].shots.length&&r.level[r.player.currentScreen].shots.forEach(r=>e.drawImage(t[gr.BULLET],...vr.BULLET,...br({x:s.x,y:s.y},r,f,m),18,18)),e.drawImage(t[r.level[r.player.currentScreen].forground],a,E,1152,768,0,0,1152,768),r.level[r.player.currentScreen].messages.some(e=>e.active))&&r.level[r.player.currentScreen].messages.filter(e=>e.active).forEach(t=>((e,t,r,a,s)=>{e.textAlign="center",e.fillStyle="rgba(255, 255, 255, 0.6)",e.font="25px PixelFont";var[n,o]=br({x:t.x,y:t.y},{x:t.remote.x,y:t.remote.y},r,a),i=t.remote.active?{x:n,y:o}:{x:r,y:a};e.fillText(s.message,i.x+40,i.y-35)})(e,s,f,m,t));e.drawImage(t[29],0,10);for(var A=0;A<10;A+=1)Math.ceil(r.player.hp)>A?e.drawImage(t[30],145+A*t[30].width,10):e.drawImage(t[32],145+A*t[30].width,10),Math.ceil(r.player.ammo)>A?e.drawImage(t[31],434+A*t[31].width,10):e.drawImage(t[32],434+A*t[31].width,10)},Or=(e,t)=>r=>((e,t,r)=>{Ar(e,t,r);var a=(1152-t[33].width)/2,s=(768-t[33].height)/2;return e.drawImage(t[33],a,s),{fps:0}})(e,t,r),{matchAsset:xr,spriteSheet:_r}=hr(),Tr=function(e,t){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:806,a=arguments.length>3&&void 0!==arguments[3]?arguments[3]:22,s=arguments.length>4&&void 0!==arguments[4]?arguments[4]:350,n=arguments.length>5&&void 0!==arguments[5]?arguments[5]:"rgba(255,255,255,0.7)",o=()=>{e.font="".concat(a,"px PixelFont"),e.textAlign="left",e.fillStyle=n,t.split("\n").forEach((t,a)=>e.fillText(t,r,s+27*a))};document.fonts.load("".concat(a,'px "PixelFont"')).then(o)},Lr=(e,t,r,a)=>{var s,n,o;(Ar(e,t,r),e.drawImage(t[43],0,0),r.player.items.length)&&Array.from({length:r.player.items.length%4+1},(e,t)=>Array.from({length:4},(e,a)=>4*t+a<r.player.items.length?r.player.items[4*t+a]:null)).forEach((r,a)=>r.forEach((r,s)=>{if(r&&"MESSAGE"!==r.type){var n=40+s*(105+2*s),o=100+105*a,i=_r[r.type];e.drawImage(t[xr.ITEMS],...i,n,o,r.w,r.h)}}));if("items"===r.itemSelection.currentSelection){var i=4*r.itemSelection.items.y+r.itemSelection.items.x,p=i<r.player.items.length?(s=r.player.items[i].type)?"MEDICIN"===s?"Type: ".concat(s,"\nKairos Labs is proud to\npresent this excellent\npiece of medicin.\nWounded? No problem.\nTake it and heal 1 HP."):"COMPUTER"===s?"Type: ".concat(s,"\nThis hacking device from The\nPark is legendary. It is said\nto be used to be used by the\nbest cyber cowboys. It can\nde/activate lasers.\n"):"AMMO"===s?"Type: ".concat(s,"\nThis may not be the best ammo\nthat can you can buy. But it \nsure is a damn fine piece of\nammo. Now on sale at The\nMarket of Despair!\n"):void 0:"":"";Tr(e,p),e.lineWidth=3,e.strokeStyle="red",e.beginPath();var c=36+111*r.itemSelection.items.x,l=98+111*r.itemSelection.items.y;e.rect(c,l,81,81),e.stroke()}if("mode"===r.itemSelection.currentSelection){var y=r.itemSelection.mode.y,u=(n=y,o=r.player.specialStates,0===n?"Type: SOLDIER\nMilitary grade pansar armoury.\n\nAvailability: ".concat(o.includes("SOLDIER_")?"[X]":"[ ]","\n  "):1===n?"ENGINEER (BASIC)\nKnowledge from Dialectics.\nInterface remote direction of\na watcher. If watcher gets hurt,\nyou get hurt.\n\nAvailability: ".concat(o.includes("")?"[X]":"[ ]"):"ENGINEER (ADVANCED)\nKnowledge from Golem Industries.\ncan remote direct a ROBOT\n\nAvailability: ".concat(o.includes("ENGINEER_")?"[X]":"[ ]"));Tr(e,u),e.lineWidth=3,e.strokeStyle="red",e.beginPath();var m=98+227*r.itemSelection.mode.y;e.rect(539,m,192,192),e.stroke()}return((e,t)=>{var r="\nJoshua Davids\npolice officer\n".concat(t.cash,"$\n").concat(10*t.hp,"%\n").concat(t.ammo,"\n").concat(t.armour,"\n  ");Tr(e,"\nName:\nOccupation:\nCash:\nHP:\nAmmo:\nArmour:\n  ",806,22,84,"rgba(20,120,100,0.8)"),Tr(e,r,940,22,84)})(e,r.player),{fps:0}},Sr=(e,t)=>(r,a)=>Lr(e,t,r),wr={isLoading:!0,itemSelection:{currentSelection:"items",items:{x:0,y:0},mode:{y:0}},mode:"MODE_MENU",menu:"MODE_PLAY_GAME_INTRODUCTION",player:{currentScreen:"sc1",death:!1,type:"plr",remoteActive:!1,remoteActiveDone:!1,remote:{hasHitItem:-1,isShooting:!1,x:0,y:0,velY:0,velX:0,speed:4,spriteCount:0,state:"PLAYER_WATCHER_IDLE_RIGHT",faces:pr},hp:10,hurt:1,ammo:10,cash:100,armour:5,spriteCount:0,x:1260,y:1460,isShooting:!1,hasHitItem:-1,state:"PLAYER_IDLE_LEFT",specialStates:["SOLDIER_"],specialState:"SOLDIER_",faces:pr,speed:4,velX:0,velY:0,jumping:!1,moving:!1,grounded:!1,items:[]},gravity:.4,level:{sc1:{forground:21,background1:22,background2:23,objects:[[0,0,1350,1315],[0,2900,2e3,100],[1220,0,775,995],[0,1260,955,800],[0,1639,1668,165],[1949,1800,600,70],[2213,1825,50,620],[2189,2447,60,275],[2170,2710,87,270],[1536,2958,638,49],[1455,1826,85,1145],[2235,2723,742,315],[2948,2991,3310,62],[2249,2319,830,132],[3818,1288,327,130],[2788,1807,335,704],[2543,1747,342,135],[2486,1159,521,386],[5286,0,200,3e3],[4970,2192,325,50],[3396,1806,932,664],[3775,2726,840,111],[3353,1683,1270,233],[4208,1800,325,332],[3982,2807,632,192],[4977,2468,400,72]],actionItems:[{type:"vertical elevator",x:3181,y:1806,w:196,h:36,speed:4,startY:1806,maxY:2850,spriteCount:0,maxSpriteCount:3,img:"ELEVATOR"},{type:"vertical elevator",x:4660,y:1688,w:196,h:36,speed:3,startY:1688,maxY:2720,spriteCount:0,maxSpriteCount:3,img:"ELEVATOR"},{status:!0,key:"ABA",type:"laser",x:2622,y:2470,w:96,h:288,spriteCount:0,maxSpriteCount:8,beamX:52,beamY:80,beamW:48,img:"LASER"},{type:"DOOR",x:2280,y:2527,w:192,h:192,spriteCount:0,maxSpriteCount:7,img:"DOOR"}],messages:[],explosions:[],shots:[],hits:[],items:[{type:"COMPUTER",key:"ABA",x:5170,y:2790,w:75,h:75,status:!0},{type:"LEVEL",mode:"MODE_SC2",next:"sc2",startX:210,startY:700,x:2282,y:2527,w:192,h:192,status:!0},{type:"MESSAGE",x:1480,y:1480,w:200,h:200,status:!0,message:"PRESS H FOR HELP"},{type:"MEDICIN",x:3785,y:2885,w:75,h:75,status:!0},{type:"AMMO",x:5120,y:2350,w:75,h:75,status:!0},{type:"AMMO",x:2751,y:1667,w:75,h:75,status:!0},{type:"AMMO",x:3051,y:1667,w:75,h:75,status:!0}],enemies:[{type:"TYPE_1",x:4825,y:2810,status:!0,hp:2,w:99,h:111,jumping:!1,spriteCount:0,speed:-3,grounded:!1,velX:0,velY:10,state:"LEFT",faces:cr},{type:"TYPE_1",x:4734,y:2827,status:!0,hp:2,w:99,h:111,jumping:!1,spriteCount:0,speed:-3,grounded:!1,velX:0,velY:10,state:"LEFT",faces:cr},{type:"TYPE_1",x:2430,y:1688,status:!0,hp:4,w:99,h:111,jumping:!1,spriteCount:0,speed:-3,grounded:!1,velX:0,velY:10,state:"LEFT",faces:cr},{type:"TYPE_2",x:3320,y:2810,status:!0,hp:2,shotInterval:0,w:142,h:127,jumping:!1,spriteCount:0,speed:-4,grounded:!1,velX:0,velY:10,state:"LEFT",faces:cr},{type:"TYPE_2",status:!0,x:4225,y:1525,hp:2,w:142,h:127,shotInterval:0,jumping:!1,spriteCount:0,speed:-4,grounded:!1,velX:0,velY:10,state:"LEFT",faces:cr}],areas:[]},sc2:{forground:76,background1:75,background2:74,objects:[[3772,360,350,35],[2322,538,352,90],[0,0,5,2260],[667,626,64,28],[0,387,545,76],[0,2255,6150,5],[6139,0,5,2255],[0,0,6144,5],[0,745,304,73],[306,820,698,216],[0,1553,648,230],[0,1764,174,457],[79,2223,1700,22],[1416,1263,771,30],[1767,1292,60,940],[1830,1524,370,724],[2200,2044,3210,206],[2775,1870,82,100],[3397,885,151,1200],[3173,1394,852,101],[3181,797,852,101],[4151,1846,225,200],[1923,799,852,101],[2020,0,308,805],[1680,0,326,431],[4743,1381,852,101],[5218,1448,151,750],[5375,2147,800,100],[5776,460,380,310],[4079,0,772,452],[5494,740,321,28],[4111,1572,167,19],[4197,1029,167,19],[2518,1638,130,12],[2354,1358,130,12],[2197,1682,45,31],[2197,1855,45,31]],actionItems:[{type:"DOOR",x:0,y:553,w:192,h:192,spriteCount:0,maxSpriteCount:7,img:"DOOR"},{type:"horisontal elevator",x:2400,y:420,w:196,h:36,speed:4,startX:2400,maxX:3560,spriteCount:0,maxSpriteCount:3,img:"ELEVATOR"},{type:"horisontal elevator",x:5810,y:1150,w:196,h:36,speed:4,startX:4200,maxX:5830,spriteCount:0,maxSpriteCount:3,img:"ELEVATOR"},{type:"horisontal elevator",x:1322,y:829,w:196,h:36,speed:4,startX:1322,maxX:1729,spriteCount:0,maxSpriteCount:3,img:"ELEVATOR"},{type:"horisontal elevator",x:4060,y:790,w:196,h:36,speed:6,startX:4060,maxX:5030,spriteCount:0,maxSpriteCount:3,img:"ELEVATOR"},{type:"vertical elevator",x:4535,y:1600,w:196,h:36,speed:6,startY:1382,maxY:2e3,spriteCount:0,maxSpriteCount:3,img:"ELEVATOR"},{type:"vertical elevator",x:2922,y:1870,w:196,h:36,speed:6,startY:804,maxY:1900,spriteCount:0,maxSpriteCount:3,img:"ELEVATOR"},{type:"vertical elevator",x:5666,y:1284,w:196,h:36,speed:6,startY:1284,maxY:2e3,spriteCount:0,maxSpriteCount:3,img:"ELEVATOR"},{type:"vertical elevator",x:657,y:2100,w:196,h:36,speed:6,startY:1550,maxY:2170,spriteCount:0,maxSpriteCount:3,img:"ELEVATOR"},{type:"vertical elevator",x:1020,y:820,w:196,h:36,speed:8,startY:820,maxY:2170,spriteCount:0,maxSpriteCount:3,img:"ELEVATOR"},{type:"DOOR",x:5889,y:269,w:192,h:192,spriteCount:0,maxSpriteCount:7,img:"DOOR"}],messages:[],explosions:[],shots:[],hits:[],items:[{type:"WATCHER",x:5900,y:1950,w:75,h:75,status:!0},{type:"LEVEL",mode:"MODE_PLAY_GAME",next:"sc1",startX:2600,startY:2550,x:0,y:553,w:192,h:192,status:!0},{type:"LEVEL",mode:"MODE_SC3",next:"sc3",startX:295,startY:2740,x:5889,y:269,w:192,h:192,status:!0},{type:"MEDICIN",x:2410,y:470,w:75,h:75,status:!0},{type:"MEDICIN",x:150,y:330,w:75,h:75,status:!0},{type:"MEDICIN",x:3730,y:1230,w:75,h:75,status:!0},{type:"AMMO",x:5500,y:2040,w:75,h:75,status:!0},{type:"AMMO",x:5700,y:2040,w:75,h:75,status:!0},{type:"AMMO",x:3900,y:275,w:75,h:75,status:!0},{type:"AMMO",x:740,y:720,w:75,h:75,status:!0},{type:"AMMO",x:720,y:720,w:75,h:75,status:!0},{type:"AMMO",x:2420,y:720,w:75,h:75,status:!0},{type:"AMMO",x:1550,y:2189,w:75,h:75,status:!0},{type:"AMMO",x:1450,y:2189,w:75,h:75,status:!0},{type:"AMMO",x:3700,y:1850,w:75,h:75,status:!0},{type:"MEDICIN",x:180,y:1430,w:75,h:75,status:!0},{type:"MEDICIN",x:1939,y:750,w:75,h:75,status:!0}],enemies:[{type:"TYPE_1",x:130,y:340,status:!0,hp:3,w:99,h:111,jumping:!1,spriteCount:0,speed:-3,grounded:!1,velX:0,velY:10,state:"LEFT",faces:cr},{type:"TYPE_1",x:330,y:2080,status:!0,hp:3,w:99,h:111,jumping:!1,spriteCount:0,speed:-3,grounded:!1,velX:0,velY:10,state:"LEFT",faces:cr},{type:"TYPE_1",x:130,y:1388,status:!0,hp:3,w:99,h:111,jumping:!1,spriteCount:0,speed:-3,grounded:!1,velX:0,velY:10,state:"LEFT",faces:cr},{type:"TYPE_1",x:5550,y:2020,status:!0,hp:2,shotInterval:0,w:99,h:111,jumping:!1,spriteCount:0,speed:-4,grounded:!1,velX:0,velY:10,state:"LEFT",faces:cr},{type:"TYPE_1",x:2450,y:1800,status:!0,hp:2,shotInterval:0,w:99,h:111,jumping:!1,spriteCount:0,speed:-4,grounded:!1,velX:0,velY:10,state:"LEFT",faces:cr},{type:"TYPE_1",x:4600,y:1830,status:!0,hp:2,shotInterval:0,w:99,h:111,jumping:!1,spriteCount:0,speed:-4,grounded:!1,velX:0,velY:10,state:"LEFT",faces:cr},{type:"TYPE_2",x:4800,y:1940,status:!0,hp:3,shotInterval:0,w:142,h:127,jumping:!1,spriteCount:0,speed:-4,grounded:!1,velX:0,velY:10,state:"LEFT",faces:cr},{type:"TYPE_2",x:4850,y:1240,status:!0,hp:3,shotInterval:0,w:142,h:127,jumping:!1,spriteCount:0,speed:-4,grounded:!1,velX:0,velY:10,state:"LEFT",faces:cr},{type:"TYPE_2",x:715,y:2080,status:!0,hp:3,shotInterval:0,w:142,h:127,jumping:!1,spriteCount:0,speed:-4,grounded:!1,velX:0,velY:10,state:"LEFT",faces:cr},{type:"TYPE_2",x:3222,y:640,hp:3,status:!0,shotInterval:0,w:142,h:127,jumping:!1,spriteCount:0,speed:-4,grounded:!1,velX:0,velY:10,state:"LEFT",faces:cr}],areas:[]},sc3:{forground:80,background1:79,background2:78,objects:[[0,0,10,2990],[0,2980,9960,25],[4857,2439,640,34],[9869,0,105,2980],[0,2928,600,70],[0,2486,253,234],[594,2492,501,501],[0,2120,200,290],[0,1637,838,481],[0,1205,744,103],[0,970,660,255],[1093,2922,1280,80],[2284,2680,282,297],[1328,1969,547,652],[896,1318,642,34],[979,754,555,353],[1538,749,754,120],[1243,1567,607,199],[2005,1248,506,197],[2507,1306,87,114],[2452,958,642,32],[2452,588,642,32],[2870,1538,282,252],[2130,2112,425,45],[2354,2230,115,115],[2436,2140,70,70],[2130,1710,1024,96],[2552,1794,486,640],[2646,2830,700,150],[3280,2544,398,444],[3280,2540,1278,102],[4160,2266,394,352],[3602,2212,402,100],[3340,1364,408,128],[3556,1494,190,232],[3748,1448,254,38],[3494,732,424,390],[3876,732,260,122],[5486,2698,402,282],[4784,156,564,388],[4784,964,564,388],[4784,1352,282,246],[4824,1536,570,728],[5404,1522,378,96],[5404,1922,468,300],[6138,2300,1382,474],[6802,2770,266,300],[6226,1858,100,150],[6316,1636,1294,452],[7792,1770,932,688],[8688,2450,52,310],[7962,2736,805,360],[5712,1354,630,35],[6210,1224,630,35],[6716,1088,630,35],[7398,974,104,140],[7503,827,842,474],[8686,1520,630,35],[8686,1146,630,35],[8686,792,630,35],[8686,422,630,35],[3786,1964,630,35]],actionItems:[{type:"DOOR",x:15,y:2735,w:192,h:192,spriteCount:0,maxSpriteCount:7,img:"DOOR"},{type:"horisontal elevator",x:4225,y:735,w:196,h:36,speed:5,startX:4225,maxX:4825,spriteCount:0,maxSpriteCount:3,img:"ELEVATOR"},{type:"vertical elevator",x:8800,y:2910,w:196,h:36,speed:8,startY:1750,maxY:2950,spriteCount:0,maxSpriteCount:3,img:"ELEVATOR"},{type:"vertical elevator",x:9400,y:410,w:196,h:36,speed:7,startY:410,maxY:2950,spriteCount:0,maxSpriteCount:3,img:"ELEVATOR"},{type:"vertical elevator",x:8500,y:1630,w:196,h:36,speed:7,startY:370,maxY:1680,spriteCount:0,maxSpriteCount:3,img:"ELEVATOR"},{type:"vertical elevator",x:7600,y:2900,w:196,h:36,speed:7,startY:1600,maxY:2960,spriteCount:0,maxSpriteCount:3,img:"ELEVATOR"},{type:"vertical elevator",x:5895,y:2930,w:196,h:36,speed:5,startY:1850,maxY:2960,spriteCount:0,maxSpriteCount:3,img:"ELEVATOR"},{type:"vertical elevator",x:3215,y:1260,w:196,h:36,speed:5,startY:590,maxY:1290,spriteCount:0,maxSpriteCount:3,img:"ELEVATOR"},{type:"vertical elevator",x:4010,y:1850,w:196,h:36,speed:5,startY:1450,maxY:1900,spriteCount:0,maxSpriteCount:3,img:"ELEVATOR"},{type:"vertical elevator",x:3160,y:2220,w:196,h:36,speed:5,startY:1540,maxY:2440,spriteCount:0,maxSpriteCount:3,img:"ELEVATOR"},{type:"vertical elevator",x:1890,y:2700,w:196,h:36,speed:5,startY:1720,maxY:2730,spriteCount:0,maxSpriteCount:3,img:"ELEVATOR"},{type:"vertical elevator",x:380,y:2800,w:196,h:36,speed:6,startY:2515,maxY:2820,spriteCount:0,maxSpriteCount:3,img:"ELEVATOR"}],messages:[],explosions:[],shots:[],hits:[],items:[{type:"LEVEL",mode:"MODE_PLAY_GAME",next:"sc2",startX:5790,startY:269,x:15,y:2735,w:192,h:192,status:!0},{type:"AMMO",x:7e3,y:1015,w:75,h:75,status:!0},{type:"AMMO",x:7e3,y:1015,w:75,h:75,status:!0},{type:"AMMO",x:5130,y:880,w:75,h:75,status:!0},{type:"AMMO",x:2650,y:540,w:75,h:75,status:!0},{type:"AMMO",x:1150,y:1250,w:75,h:75,status:!0},{type:"AMMO",x:3850,y:2850,w:75,h:75,status:!0},{type:"AMMO",x:8225,y:2700,w:75,h:75,status:!0},{type:"MEDICIN",x:8225,y:740,w:75,h:75,status:!0},{type:"MEDICIN",x:6260,y:1815,w:75,h:75,status:!0},{type:"MEDICIN",x:2855,y:2724,w:75,h:75,status:!0},{type:"MEDICIN",x:1725,y:1888,w:75,h:75,status:!0},{type:"MEDICIN",x:50,y:2400,w:75,h:75,status:!0}],enemies:[{type:"TYPE_1",x:970,y:2350,status:!0,hp:2,shotInterval:0,w:99,h:111,jumping:!1,spriteCount:0,speed:-4,grounded:!1,velX:0,velY:10,state:"LEFT",faces:cr},{type:"TYPE_1",x:1700,y:590,status:!0,hp:2,shotInterval:0,w:99,h:111,jumping:!1,spriteCount:0,speed:-4,grounded:!1,velX:0,velY:10,state:"LEFT",faces:cr},{type:"TYPE_1",x:2400,y:1100,status:!0,hp:2,shotInterval:0,w:99,h:111,jumping:!1,spriteCount:0,speed:-4,grounded:!1,velX:0,velY:10,state:"LEFT",faces:cr},{type:"TYPE_1",x:8880,y:250,status:!0,hp:2,shotInterval:0,w:99,h:111,jumping:!1,spriteCount:0,speed:-4,grounded:!1,velX:0,velY:10,state:"LEFT",faces:cr},{type:"TYPE_1",x:5430,y:1360,status:!0,hp:2,shotInterval:0,w:99,h:111,jumping:!1,spriteCount:0,speed:-4,grounded:!1,velX:0,velY:10,state:"LEFT",faces:cr},{type:"TYPE_1",x:8200,y:1640,status:!0,hp:2,shotInterval:0,w:99,h:111,jumping:!1,spriteCount:0,speed:-4,grounded:!1,velX:0,velY:10,state:"LEFT",faces:cr},{type:"TYPE_2",x:9e3,y:2800,status:!0,hp:3,shotInterval:0,w:142,h:127,jumping:!1,spriteCount:0,speed:-4,grounded:!1,velX:0,velY:10,state:"LEFT",faces:cr},{type:"TYPE_2",x:9300,y:2800,status:!0,hp:3,shotInterval:0,w:142,h:127,jumping:!1,spriteCount:0,speed:-4,grounded:!1,velX:0,velY:10,state:"LEFT",faces:cr},{type:"TYPE_2",x:8300,y:2600,status:!0,hp:3,shotInterval:0,w:142,h:127,jumping:!1,spriteCount:0,speed:-4,grounded:!1,velX:0,velY:10,state:"LEFT",faces:cr},{type:"TYPE_2",x:6500,y:2150,status:!0,hp:3,shotInterval:0,w:142,h:127,jumping:!1,spriteCount:0,speed:-4,grounded:!1,velX:0,velY:10,state:"LEFT",faces:cr},{type:"TYPE_2",x:3800,y:2820,status:!0,hp:3,shotInterval:0,w:142,h:127,jumping:!1,spriteCount:0,speed:-4,grounded:!1,velX:0,velY:10,state:"LEFT",faces:cr},{type:"TYPE_2",x:4900,y:2820,status:!0,hp:3,shotInterval:0,w:142,h:127,jumping:!1,spriteCount:0,speed:-4,grounded:!1,velX:0,velY:10,state:"LEFT",faces:cr},{type:"TYPE_2",x:3600,y:595,status:!0,hp:3,shotInterval:0,w:142,h:127,jumping:!1,spriteCount:0,speed:-4,grounded:!1,velX:0,velY:10,state:"LEFT",faces:cr},{type:"TYPE_2",x:2400,y:1550,status:!0,hp:3,shotInterval:0,w:142,h:127,jumping:!1,spriteCount:0,speed:-4,grounded:!1,velX:0,velY:10,state:"LEFT",faces:cr},{type:"TYPE_2",x:335,y:1500,status:!0,hp:3,shotInterval:0,w:142,h:127,jumping:!1,spriteCount:0,speed:-4,grounded:!1,velX:0,velY:10,state:"LEFT",faces:cr},{type:"TYPE_2",x:1675,y:2800,status:!0,hp:3,shotInterval:0,w:142,h:127,jumping:!1,spriteCount:0,speed:-4,grounded:!1,velX:0,velY:10,state:"LEFT",faces:cr},{type:"TYPE_2",x:1175,y:2800,status:!0,hp:3,shotInterval:0,w:142,h:127,jumping:!1,spriteCount:0,speed:-4,grounded:!1,velX:0,velY:10,state:"LEFT",faces:cr}],areas:[]}},fps:60,msg:"",noiseCount:0,layers:Array.from({length:3},(e,t)=>({x:0,y:0,speed:-(t+1)})),audio:{shot:!1,remote:!1,explosion:!1,background:!0},text:{MODE_PLAY_GAME_INTRODUCTION:{nextMode:"MODE_PLAY_GAME",message:"\nIt seemed like all the lowlifes in the city had crawled out to soak in a bit of darkness. A light rain fell\non the streets. But a sky-fall would be required to wash away all the scums standing in the street\ncorners, posing.\n\nAs if they were someone. But they're only a vermin of the cities, raw, crude existences with access to\nhigh-tech gear. The rats of the middle ages. Besides the wizards, none of them could connect to the Link.\n\nAnd this is why simple cops like me still are in demand, I thought. In the Link, everything and everyone is\ncontrolled; all while lowlifes in the massive suburbs of New London persists in the shadows. They keep\nlingering in a crude world, struggling for survival in what was previously labeled reality. Their refusal\nto die is a bad parody of the real technologies available to the filthy rich.\n\nMy current task was to find one of the rats, an unenhanced commoner, named Frank, a renegade ex-military\ncop. And why? Because some white-collar on the floor above suspected Frank had got hold of avant-garde\ntech, making it possible to emerge unseen in the Link. And this the mega-cooperations would not tolerate.\nBad for business.",next:"ENTER: Play",header:"Note App:  entry A324"},MODE_ABOUT_GAME:{nextMode:"MODE_MENU",message:"\nDivision By Zero is made by:\nProgramming - Claes-Magnus Berg\nMusic - Dennis Lindfors\n\nThanks to Harry for bug reports, suggestions and playing.\n\nGraphics by:\nSzadi art (licensed)\nEvgeniy Luch (licensed)\nJuicy Games (licensed)\n@motionspgfx\nand various artists, such as Animuz, with public domain licenses.\n",next:"ENTER: Menu",header:"About game"},MODE_SC2:{nextMode:"MODE_PLAY_GAME",message:"\nI always hate going to this part... it's full of 'em. Rats. Robots.\nAll things bad.\n",next:"ENTER: Play",header:"Note App:  entry A325"},MODE_SC3:{nextMode:"MODE_PLAY_GAME",message:"\nIt was a beautiful sight, it really was. But no beauty can conceal the ugliness of rats fleshed up as humans. Being human used to mean something. Instead of God,\nor at least grande Ideas to live by, we have technology and distorted nature.",next:"ENTER: Play",header:"Note App:  entry A326"},MODE_GAME_OVER:{nextMode:"MODE_MENU",message:"\nI am sorry, you died a horrible death. However, for a symbolic fee, we let you access your downloaded self\nin a nice body. If not, we'll delete this temporary file.\n\nPerhaps you'll do better the next round? You seem strong! You seem able! Souls INC. believe in you and got\nyou covered for a trifle, 30.000$.\n\nDo you really want this to be the end? When accessing your downloaded self, Souls INC. throw in either a VR \nexperience at Honolulu Bay or, if you pay an additional 10K, teleport you off-world to a real tropical paradise \nbest experienced in flesh and blood... for that extra stimulation VR cannot produce with the same intensity.\n\nUs working at Souls INC. got this. Choose life!\n",next:"ENTER: Menu",header:"Souls INC."}}};function Rr(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,a)}return r}function Pr(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?Rr(Object(r),!0).forEach((function(t){ir()(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):Rr(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}var Ir=e=>{var t=document.getElementById("canvas").getContext("2d"),r=dr(t,e),a=Object.keys(wr.text).reduce((e,t)=>Pr(Pr({},e),{},{[t]:r}),{}),s=fr(t,e),n=((e,t)=>r=>Ar(e,t,r))(t,e),o=Or(t,e),i=Sr(t,e);return new Map(Object.entries(a)).set("MODE_MENU",s).set("MODE_PLAY_GAME",n).set("MODE_PLAY_GAME_HELP",o).set("MODE_PLAY_GAME_ITEMS",i)};function Cr(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,a)}return r}function Yr(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?Cr(Object(r),!0).forEach((function(t){ir()(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):Cr(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}var Mr=(e,t)=>{var r=lr.findIndex(ur(t))||0,a=lr.length-1;return"ArrowDown"===e?r+1>a?lr[0]:lr[r+1]:r-1<0?lr[a]:lr[r-1]},jr=(e,t)=>{var r=e.getStopKeys();return r.Enter?"MODE_LOAD_GAME"===t.menu&&localStorage.getItem("state")?(localStorage.setItem("load","true"),Yr(Yr({},t),{},{mode:"MODE_PLAY_GAME"})):Yr(Yr({},t),{},{mode:t.menu}):r.ArrowDown?Yr(Yr({},t),{},{menu:Mr("ArrowDown",t.menu)}):r.ArrowUp?Yr(Yr({},t),{},{menu:Mr("ArrowUp",t.menu)}):t};function Dr(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,a)}return r}function Hr(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?Dr(Object(r),!0).forEach((function(t){ir()(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):Dr(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}var Fr=(e,t,r)=>e.getStopKeys().Enter?(e.clear(),"MODE_GAME_OVER"===t.mode?Hr({},wr):Hr(Hr({},t),{},{msg:"",fps:60,mode:r})):t;function Gr(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,a)}return r}function Nr(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?Gr(Object(r),!0).forEach((function(t){ir()(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):Gr(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function kr(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,a)}return r}function Ur(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?kr(Object(r),!0).forEach((function(t){ir()(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):kr(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}var Xr=(e,t)=>{var r=e.getKeys(),a=e.getStopKeys(),s=e.getSpecialKeys(),{player:n}=t;return n.death||n.state.includes("HURT")?t:a.m?Ur(Ur({},t),{},{mode:"MODE_MENU"}):a.h?(e=>Nr(Nr({},e),{},{mode:"MODE_PLAY_GAME_HELP"}))(t):a.i?(e=>Nr(Nr({},e),{},{mode:"MODE_PLAY_GAME_ITEMS"}))(t):""===n.specialState&&n.remoteActive&&n.remoteActiveDone&&a.r?(e=>Nr(Nr({},e),{},{player:Nr(Nr({},e.player),{},{remoteActiveDone:!1,remoteActive:!1})}))(t):""===n.specialState&&!n.jumping&&n.grounded&&a.r?(e=>{var t=e.player.faces===pr?"PLAYER_SUMMON_LEFT":"PLAYER_SUMMON_RIGHT";return Nr(Nr({},e),{},{player:Nr(Nr({},e.player),{},{remoteActiveDone:!1,remoteActive:!0,state:t,faces:e.player.faces===pr?pr:"PLAYER_FACES_RIGHT",spriteCount:0,remote:Nr(Nr({},e.player.remote),{},{x:-1e4})}),audio:Nr(Nr({},e.audio),{},{remote:!0})})})(t):n.remoteActive&&n.remoteActiveDone&&!n.remote.isShooting&&(r.ArrowLeft||r.ArrowRight)?((e,t)=>{var r=t.ArrowLeft?-e.player.remote.speed:e.player.remote.speed,a=t.ArrowLeft?pr:"PLAYER_FACES_RIGHT";return Nr(Nr({},e),{},{player:Nr(Nr({},e.player),{},{remote:Nr(Nr({},e.player.remote),{},{state:a===pr?"PLAYER_WATCHER_IDLE_LEFT":"PLAYER_WATCHER_IDLE_RIGHT",velX:r,faces:a})})})})(t,r):n.remoteActive&&n.remoteActiveDone&&!n.remote.isShooting&&(r.ArrowUp||r.ArrowDown)?((e,t)=>{var r=t.ArrowUp?-e.player.remote.speed:e.player.remote.speed,a=e.player.remote.faces===pr?"PLAYER_WATCHER_IDLE_LEFT":"PLAYER_WATCHER_IDLE_RIGHT";return Nr(Nr({},e),{},{player:Nr(Nr({},e.player),{},{remote:Nr(Nr({},e.player.remote),{},{state:a,velY:r})})})})(t,r):n.ammo>0&&n.remoteActive&&n.remoteActiveDone&&r[" "]&&!n.remote.state.startsWith("PLAYER_WATCHER_ATTACK")?((e,t)=>{var r=e.player.remote.faces===pr?"PLAYER_WATCHER_ATTACK_LEFT":"PLAYER_WATCHER_ATTACK_RIGHT";return Nr(Nr({},e),{},{player:Nr(Nr({},e.player),{},{remote:Nr(Nr({},e.player.remote),{},{isShooting:!0,state:r,spriteCount:0})})})})(t):n.remoteActive&&n.remoteActiveDone&&!n.remote.state.startsWith("PLAYER_WATCHER_ATTACK")?(e=>{var t;return t=e.player.state.includes("DEATH")?e.player.state:e.player.remote.faces===pr?"PLAYER_WATCHER_IDLE_LEFT":"PLAYER_WATCHER_IDLE_RIGHT",Nr(Nr({},e),{},{player:Nr(Nr({},e.player),{},{remote:Nr(Nr({},e.player.remote),{},{state:t,isShooting:!1,velX:0,velY:0})})})})(t):n.remoteActive||n.isShooting?t:n.ammo>0&&!n.jumping&&n.grounded&&r[" "]&&!n.remoteActive?(e=>{var t=e.player.faces===pr?"PLAYER_".concat(e.player.specialState,"ATTACK_LEFT"):"PLAYER_".concat(e.player.specialState,"ATTACK_RIGHT");return Nr(Nr({},e),{},{player:Nr(Nr({},e.player),{},{velY:e.player.velY+e.gravity,isShooting:!0,spriteCount:0,state:t}),audio:Nr(Nr({},e.audio),{},{shot:!0})})})(t):!n.jumping&&n.grounded&&s.ArrowUp&&!n.remoteActive?(e=>{var t=e.player.faces===pr?"PLAYER_".concat(e.player.specialState,"JUMP_LEFT"):"PLAYER_".concat(e.player.specialState,"JUMP_RIGHT");return Nr(Nr({},e),{},{player:Nr(Nr({},e.player),{},{state:t,jumping:!0,grounded:!1,spriteCount:0,velY:2.5*-e.player.speed})})})(t):r.ArrowLeft&&n.velX>-n.speed?(e=>Nr(Nr({},e),{},{player:Nr(Nr({},e.player),{},{spriteCount:e.player.moving?e.player.spriteCount:0,moving:!0,faces:pr,state:e.player.state.includes("JUMP")?"PLAYER_".concat(e.player.specialState,"JUMP_LEFT"):"PLAYER_".concat(e.player.specialState,"WALK_LEFT"),velX:e.player.velX+-e.player.speed,velY:e.player.velY+e.gravity})}))(t):r.ArrowRight&&n.velX<n.speed?(e=>Nr(Nr({},e),{},{player:Nr(Nr({},e.player),{},{spriteCount:e.player.moving?e.player.spriteCount:0,moving:!0,faces:"PLAYER_FACES_RIGHT",state:e.player.state.includes("JUMP")?"PLAYER_".concat(e.player.specialState,"JUMP_RIGHT"):"PLAYER_".concat(e.player.specialState,"WALK_RIGHT"),velX:e.player.velX+e.player.speed,velY:e.player.velY+e.gravity})}))(t):r.ArrowLeft||r.ArrowRight||n.jumping?Ur(Ur({},t),{},{player:Ur(Ur({},n),{},{velY:n.velY+t.gravity})}):(e=>Nr(Nr({},e),{},{player:Nr(Nr({},e.player),{},{state:e.player.faces===pr?"PLAYER_".concat(e.player.specialState,"IDLE_LEFT"):"PLAYER_".concat(e.player.specialState,"IDLE_RIGHT"),moving:!1,velX:0,velY:e.player.velY+e.gravity}),audio:Nr(Nr({},e.audio),{},{shot:!1})}))(t)};function Wr(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,a)}return r}function Kr(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?Wr(Object(r),!0).forEach((function(t){ir()(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):Wr(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}var Vr=(e,t)=>e.getStopKeys().h?(e.clear(),Kr(Kr({},t),{},{mode:"MODE_PLAY_GAME"})):t;function Br(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,a)}return r}function Jr(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?Br(Object(r),!0).forEach((function(t){ir()(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):Br(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}var zr=(e,t)=>{var r=t.find(t=>t.key===e.key);if(!r)return t;var a=Jr(Jr({},r),{},{spriteCount:0,maxSpriteCount:r.status?2:8,status:!r.status});return[...t.filter(t=>t.key!==e.key),a]},qr=(e,t)=>{var r=e.getStopKeys(),{itemSelection:a}=t;if(r.i)return e.clear(),Jr(Jr({},t),{},{mode:"MODE_PLAY_GAME"});if(r.Enter){if(e.clear(),"items"===a.currentSelection){var s=4*a.items.y+a.items.x;if(t.player.items[s]){if("MEDICIN"===t.player.items[s].type)return Jr(Jr({},t),{},{player:Jr(Jr({},t.player),{},{hp:t.player.hp+1,items:t.player.items.filter(mr(s))})});if("COMPUTER"===t.player.items[s].type){var n=Jr(Jr({},t.player),{},{items:t.player.items.filter(mr(s))});return Jr(Jr({},t),{},{player:n,level:Jr(Jr({},t.level),{},{[t.player.currentScreen]:Jr(Jr({},t.level[t.player.currentScreen]),{},{actionItems:zr(t.player.items[s],t.level[t.player.currentScreen].actionItems)})})})}if("HELMET"===t.player.items[s].type)return Jr(Jr({},t),{},{player:Jr(Jr({},t.player),{},{ammo:t.player.armour+1,items:t.player.items.filter(mr(s))})});if("GUN"===t.player.items[s].type)return Jr(Jr({},t),{},{player:Jr(Jr({},t.player),{},{hurt:t.player.hurt+1,items:t.player.items.filter(mr(s))})});if("ARMOUR"===t.player.items[s].type)return Jr(Jr({},t),{},{player:Jr(Jr({},t.player),{},{ammo:t.player.armour+1,items:t.player.items.filter(mr(s))})});if("AMMO"===t.player.items[s].type)return Jr(Jr({},t),{},{player:Jr(Jr({},t.player),{},{ammo:t.player.ammo+1,items:t.player.items.filter(mr(s))})})}}else{if(0===a.mode.y&&t.player.specialStates.includes("SOLDIER_"))return Jr(Jr({},t),{},{mode:"MODE_PLAY_GAME",player:Jr(Jr({},t.player),{},{specialState:"SOLDIER_"})});if(1===a.mode.y&&t.player.specialStates.includes(""))return Jr(Jr({},t),{},{mode:"MODE_PLAY_GAME",player:Jr(Jr({},t.player),{},{specialState:""})})}return t}return r.ArrowLeft?(e.clear(),"items"===a.currentSelection?a.items.x>0?Jr(Jr({},t),{},{itemSelection:Jr(Jr({},t.itemSelection),{},{items:Jr(Jr({},t.itemSelection.items),{},{x:t.itemSelection.items.x-1})})}):t:"mode"===a.currentSelection?Jr(Jr({},t),{},{itemSelection:Jr(Jr({},t.itemSelection),{},{currentSelection:"items",items:{y:2*a.mode.y,x:3}})}):t):r.ArrowRight&&(e.clear(),"items"===a.currentSelection)?a.items.x<3?Jr(Jr({},t),{},{itemSelection:Jr(Jr({},t.itemSelection),{},{items:Jr(Jr({},t.itemSelection.items),{},{x:t.itemSelection.items.x+1})})}):Jr(Jr({},t),{},{itemSelection:Jr(Jr({},t.itemSelection),{},{currentSelection:"mode",mode:{y:Math.floor(a.mode.y/2)}})}):r.ArrowDown?(e.clear(),"items"===a.currentSelection&&a.items.y<4?Jr(Jr({},t),{},{itemSelection:Jr(Jr({},t.itemSelection),{},{items:Jr(Jr({},t.itemSelection.items),{},{y:t.itemSelection.items.y+1})})}):"mode"===a.currentSelection&&a.mode.y<2?Jr(Jr({},t),{},{itemSelection:Jr(Jr({},t.itemSelection),{},{mode:{y:t.itemSelection.mode.y+1}})}):t):r.ArrowUp?(e.clear(),"items"===a.currentSelection&&a.items.y>0?Jr(Jr({},t),{},{itemSelection:Jr(Jr({},t.itemSelection),{},{items:Jr(Jr({},t.itemSelection.items),{},{y:t.itemSelection.items.y-1})})}):"mode"===a.currentSelection&&a.mode.y>0?Jr(Jr({},t),{},{itemSelection:Jr(Jr({},t.itemSelection),{},{mode:{y:t.itemSelection.mode.y-1}})}):t):t};function $r(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,a)}return r}function Zr(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?$r(Object(r),!0).forEach((function(t){ir()(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):$r(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}var Qr=Object.keys(wr.text).reduce((e,t)=>Zr(Zr({},e),{},{[t]:function(e,r){var a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:wr.text[t].nextMode;return Fr(e,r,a)}}),[]),ea=new Map(Object.entries(Qr)).set("MODE_MENU",(e,t)=>jr(e,t)).set("MODE_PLAY_GAME",(e,t)=>Xr(e,t)).set("MODE_PLAY_GAME_HELP",(e,t)=>Vr(e,t)).set("MODE_PLAY_GAME_ITEMS",(e,t)=>qr(e,t));function ta(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,a)}return r}function ra(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?ta(Object(r),!0).forEach((function(t){ir()(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):ta(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}var aa=e=>ra(ra({},e),{},{level:ra(ra({},e.level),{},{[e.player.currentScreen]:ra(ra({},e.level[e.player.currentScreen]),{},{messages:e.level[e.player.currentScreen].messages.map(e=>e.active?ra(ra({},e),{},{count:e.count-1,active:e.count>0}):e)})})}),sa=e=>{var{state:t,assets:r}=e;return{state:aa(t),assets:r}};function na(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,a)}return r}function oa(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?na(Object(r),!0).forEach((function(t){ir()(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):na(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}var{spriteSheet:ia}=hr(),pa=(e,t)=>e.x<t.x+t.w&&e.x+e.w>t.x&&e.y<t.y+t.h&&e.y+e.h>t.y,ca=(e,t)=>{var r=e.x+e.width/2-(t.x+t.width/2),a=e.y+e.height/2-(t.y+t.height/2),s=e.width/2+t.width/2,n=e.height/2+t.height/2,o=s-Math.abs(r),i=n-Math.abs(a);return Math.abs(r)<s&&Math.abs(a)<n?o>=i?a>0?[oa(oa({},e),{},{y:e.y+i}),"t"]:[oa(oa({},e),{},{y:e.y-i}),"b"]:r>0?[oa(oa({},e),{},{x:e.x+o}),"l"]:[oa(oa({},e),{},{x:e.x-o}),"r"]:[e,null]},la=e=>oa(oa({},e),{},{grounded:!1,x:e.x+Math.floor(e.velX),y:e.y+Math.floor(e.velY)}),ya=function(e,t){var[,,r,a]=e,s=arguments.length>2&&void 0!==arguments[2]?arguments[2]:[];return e=>[...t,...s].reduce((t,s)=>{var[n,o,i,p]=s,[c,l]=ca({x:e.x,y:e.y,width:r,height:a},{x:n,y:o,width:i,height:p});return"l"===l||"r"===l?oa(oa({},t),{},{x:c.x,velX:0,jumping:!1,speed:"plr"!==t.type?-1*t.speed:t.speed}):"b"===l?t.velY>20?oa(oa({},t),{},{hp:0,spriteCount:0,state:"PLAYER_".concat(t.specialState,"DEATH_").concat(t.faces===pr?"LEFT":"RIGHT")}):oa(oa({},t),{},{y:c.y,grounded:!0,jumping:!1}):"t"===l?oa(oa({},t),{},{y:o+p,velY:-1*t.velY}):t},e)},ua=e=>oa(oa({},e),{},{velY:e.grounded?0:e.velY+.4}),ma=e=>oa(oa({},e),{},{x:e.x+Math.floor(e.velX),y:e.y+Math.floor(e.velY)}),fa=(e,t)=>{var r=ia.ENEMIES[e.type][e.state][Math.floor(e.spriteCount)],a=r.length;return yr(ma,(e=>t=>oa(oa({},t),{},{spriteCount:t.spriteCount+.35<e&&!(t.spriteCount>=e)?t.spriteCount+.35:0}))(a),((e,t)=>r=>{var[,,a,s]=e,n=t.some(e=>{var[t,n,o,i]=e;return pa({x:t,y:n,w:o,h:i},{x:r.x+30*r.speed,y:r.y+20,w:a,h:s})})?r.speed:-1*r.speed,o=n;return oa(oa({},r),{},{speed:n,velX:o})})(r,t),ua,ya(r,t),la)(e)};function Ea(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,a)}return r}function da(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?Ea(Object(r),!0).forEach((function(t){ir()(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):Ea(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}var ha=(e,t)=>{var r=e.hasHitItem>-1?e.hasHitItem:e.remote.hasHitItem;return"WATCHER"===t[r].type?{active:!0,count:20,message:"NEW SKILL: ENGINEER (BASIC)"}:"COMPUTER"===t[r].type?{active:!0,count:20,message:"COMPUTER"}:"GUN"===t[r].type?{active:!0,count:20,message:"BETTER SHOTS"}:"ARMOUR"===t[r].type||"HELMET"===t[r].type?{active:!0,count:20,message:"ARMOUR 1+"}:"AMMO"===t[r].type?{active:!0,count:20,message:"AMM0 1+"}:"MEDICIN"===t[r].type?{active:!0,count:20,message:"MEDICIN 1+"}:{active:!0,count:120,message:t[r].message}},ga=e=>"vertical elevator"===e.type?e.y+e.speed>=e.maxY||e.y+e.speed<=e.startY?-1*e.speed:e.speed:"horisontal elevator"===e.type&&(e.x+e.speed>=e.maxX||e.x+e.speed<=e.startX)?-1*e.speed:e.speed,va=e=>{if(e.player.hasHitItem>-1&&"WATCHER"===e.level[e.player.currentScreen].items[e.player.hasHitItem].type){var t=da(da({},e.player),{},{specialStates:[...e.player.specialStates,""]});return da(da({},e),{},{player:t,level:da(da({},e.level),{},{[e.player.currentScreen]:da(da({},e.level[e.player.currentScreen]),{},{messages:e.player.hasHitItem>-1||e.player.remote.hasHitItem>-1?[...e.level[e.player.currentScreen].messages,ha(e.player,e.level[e.player.currentScreen].items)]:e.level[e.player.currentScreen].messages,items:e.level[e.player.currentScreen].items.filter((t,r)=>r!==e.player.hasHitItem&&r!==e.player.remote.hasHitItem)})})})}if(e.player.hasHitItem>-1&&"LEVEL"===e.level[e.player.currentScreen].items[e.player.hasHitItem].type){localStorage.setItem("load","false"),localStorage.setItem("state",JSON.stringify(e));var r=e.level[e.player.currentScreen].items[e.player.hasHitItem].next,a=da(da({},e.level),{},{[r]:da(da({},e.level[r]),{},{messages:[...e.level[r].messages,{active:!0,count:100,message:"GAME SAVED"}]})});return da(da({},e),{},{mode:e.level[e.player.currentScreen].items[e.player.hasHitItem].mode,level:a,player:da(da({},e.player),{},{currentScreen:r,spriteCount:0,x:e.level[e.player.currentScreen].items[e.player.hasHitItem].startX,y:e.level[e.player.currentScreen].items[e.player.hasHitItem].startY})})}return da(da({},e),{},{level:da(da({},e.level),{},{[e.player.currentScreen]:da(da({},e.level[e.player.currentScreen]),{},{messages:e.player.hasHitItem>-1||e.player.remote.hasHitItem>-1?[...e.level[e.player.currentScreen].messages,ha(e.player,e.level[e.player.currentScreen].items)]:e.level[e.player.currentScreen].messages,items:e.level[e.player.currentScreen].items.filter((t,r)=>r!==e.player.hasHitItem&&r!==e.player.remote.hasHitItem)})})})},ba=e=>da(da({},e),{},{level:da(da({},e.level),{},{[e.player.currentScreen]:da(da({},e.level[e.player.currentScreen]),{},{shots:e.level[e.player.currentScreen].shots.map(t=>da(da({},t),{},{x:t.x+t.speed,hasHitPlayer:pa({x:e.player.x,y:e.player.y,w:100,h:100},{x:t.x,y:t.y,w:t.w,h:t.h})||e.player.remoteActive&&pa({x:e.player.remote.x,y:e.player.remote.y,w:100,h:100},{x:t.x,y:t.y,w:t.w,h:t.h}),hasHit:e.level[e.player.currentScreen].enemies.findIndex(e=>pa({x:e.x,y:e.y,w:e.w,h:e.h},{x:t.x,y:t.y,w:t.w,h:t.h})),hasHitObstacle:e.level[e.player.currentScreen].objects.some(e=>{var[r,a,s,n]=e;return pa({x:r,y:a,w:s,h:n},{x:t.x,y:t.y,w:t.w,h:t.h})}),status:t.hasHit<0&&!t.hasHitObstacle&&!t.hasHitPlayer})).filter(e=>e.status)})})}),Aa=e=>da(da({},e),{},{level:da(da({},e.level),{},{[e.player.currentScreen]:da(da({},e.level[e.player.currentScreen]),{},{hits:e.level[e.player.currentScreen].shots.filter(e=>e.hasHit>=0||e.hasHitObstacle)})})}),Oa=e=>da(da({},e),{},{audio:da(da({},e.audio),{},{explosion:e.level[e.player.currentScreen].hits.length&&!e.audio.explosion}),level:da(da({},e.level),{},{[e.player.currentScreen]:da(da({},e.level[e.player.currentScreen]),{},{explosions:[...e.level[e.player.currentScreen].hits.map(e=>e.hasHit>=0?{x:e.x-128,y:e.y-128,w:256,h:256,status:!0,spriteCount:0}:{x:e.x-96,y:e.y-96,w:192,h:192,status:!0,spriteCount:0}),...e.level[e.player.currentScreen].explosions.map(e=>da(da({},e),{},{spriteCount:e.spriteCount+.5,status:e.spriteCount<11}))]})})}),xa=e=>{var t=e.level[e.player.currentScreen].enemies.map(t=>t.state.includes("ATTACK")?da(da(da({},t),fa(t,e.level[e.player.currentScreen].objects)),{},{x:t.x,shotInterval:t.shotInterval+1}):da(da(da({},t),fa(t,e.level[e.player.currentScreen].objects)),{},{faces:t.speed>0?"ENEMY_FACES_RIGHT":cr,state:t.faces===cr?"LEFT":"RIGHT"})).map((t,r)=>((e,t,r,a)=>t.some(e=>e.hasHit===r)?da(da({},a),{},{x:e.faces===pr?a.x-100:a.x+100,y:a.y-80,hp:a.hp-e.hurt}):a)(e.player,e.level[e.player.currentScreen].hits,r,t)).map(t=>((e,t)=>{if(e.type.includes("TYPE_1"))return e;if(pa({y:e.y-300,x:e.x-300,w:e.w+300,h:e.h+600},{x:t.player.x,y:t.player.y,w:100,h:100}))return da(da({},e),{},{spriteCount:0,shotSpeed:-25,state:"ATTACK_LEFT"});var r=pa({y:e.y-300,x:e.x,w:e.w+300,h:e.h+600},{x:t.player.x,y:t.player.y,w:100,h:100});return da(da({},e),{},r?{spriteCount:0,shotSpeed:25,state:"ATTACK_RIGHT"}:{state:e.faces===cr?"LEFT":"RIGHT"})})(t,e)).filter(e=>e.hp>0),r=t.filter(e=>e.shotInterval%50==1);return da(da({},e),{},{level:da(da({},e.level),{},{[e.player.currentScreen]:da(da({},e.level[e.player.currentScreen]),{},{enemies:t,shots:r.length>0?[...e.level[e.player.currentScreen].shots,...r.map(e=>({x:e.shotSpeed<0?e.x-100:e.x+180,y:e.y+40,w:18,h:18,hasHitPlayer:!1,hasHit:-1,hasHitObstacle:!1,type:"shot",speed:e.shotSpeed,status:!0}))]:e.level[e.player.currentScreen].shots})})})},_a=e=>{var t,{state:r,assets:a}=e;return{state:yr((t={x:r.player.x,y:r.player.y,w:80,h:130},e=>{var r,a=da(da({},e),{},{level:da(da({},e.level),{},{[e.player.currentScreen]:da(da({},e.level[e.player.currentScreen]),{},{actionItems:e.level[e.player.currentScreen].actionItems.map(a=>{var s=pa(da(da({},a),{},{y:a.y-10}),{x:t.x,y:t.y,w:t.w,h:t.h});return s&&"laser"===a.type&&a.status&&a.spriteCount>2&&(r=da(da({},e.player),{},{hp:e.player.hp-.5,x:e.player.faces===pr?e.player.x+20:e.player.x-20})),s&&"vertical elevator"===a.type&&(r=da(da({},e.player),{},{y:e.player.y+a.speed})),s&&"horisontal elevator"===a.type&&(r=da(da({},e.player),{},{x:e.player.x+a.speed})),da(da(da({},a),((e,t)=>"vertical elevator"===t.type?{y:e?t.y+t.speed:t.y}:"horisontal elevator"===t.type?{x:e?t.x+t.speed:t.x}:t)(s,a)),{},{spriteCount:a.spriteCount+1>a.maxSpriteCount?0:a.spriteCount+1,speed:ga(a)})})})})});return r?da(da({},a),{},{player:r}):a}),va,ba,Aa,Oa,xa)(r),assets:a}};function Ta(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,a)}return r}function La(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?Ta(Object(r),!0).forEach((function(t){ir()(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):Ta(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}var{spriteSheet:Sa}=hr(),wa=(e,t)=>La(La({},e),{},{player:La(La({},t),{},{spriteCount:0,ammo:t.ammo-1,isShooting:!1,remote:La(La({},t.remote),{},{spriteCount:0,state:t.remote.faces===pr?"PLAYER_WATCHER_IDLE_LEFT":"PLAYER_WATCHER_IDLE_RIGHT"})}),level:La(La({},e.level),{},{[t.currentScreen]:La(La({},e.level[t.currentScreen]),{},{shots:[...e.level[t.currentScreen].shots,{x:t.remote.faces===pr?t.remote.x-50:t.remote.x+120,y:t.remote.y+40,w:18,h:18,hasHit:-1,hasHitObstacle:!1,type:"shot",speed:t.remote.faces===pr?-18:18,status:!0}]})})}),Ra=(e,t)=>e.player.spriteCount>=11?La(La({},e),{},{player:La(La({},t),{},{spriteCount:0,ammo:t.ammo-.5,isShooting:!1,state:t.faces===pr?"PLAYER_".concat(t.specialState,"IDLE_LEFT"):"PLAYER_".concat(t.specialState,"IDLE_RIGHT")}),level:La(La({},e.level),{},{[t.currentScreen]:La(La({},e.level[t.currentScreen]),{},{shots:[...e.level[t.currentScreen].shots,{x:t.faces===pr?t.x-50:t.x+120,y:t.y+40,w:18,h:18,hasHit:-1,hasHitObstacle:!1,type:"shot",speed:t.faces===pr?-18:18,status:!0}]})})}):La(La({},e),{},{player:La(La({},t),{},{spriteCount:t.spriteCount+1})}),Pa=e=>{var t=e.remote.faces===pr?"PLAYER_IDLE_LEFT":"PLAYER_IDLE_RIGHT";return 0!==e.velX||e.jumping?(e.velX>0||e.velX<0)&&!e.jumping?La(La({},e),{},{state:e.faces===pr?"PLAYER_".concat(e.specialState,"WALK_LEFT"):"PLAYER_".concat(e.specialState,"WALK_RIGHT")}):e:La(La({},e),{},{state:t})},Ia=(e,t,r)=>{var[,,a,s]=t;return t=>{var n=r.some(e=>pa({x:e.x-5,y:e.y-5,w:e.w+10,h:e.h+10},{x:t.x,y:t.y,w:a,h:s}));return e.level[t.currentScreen].shots.some(e=>e.hasHitPlayer)||n?La(La({},t),{},{state:t.faces===pr?"PLAYER_".concat(t.specialState,"HURT_LEFT"):"PLAYER_".concat(t.specialState,"HURT_RIGHT"),hp:t.hp-1,spriteCount:0}):t}},Ca=(e,t)=>{var[,,r,a]=e;return e=>{var s=e.remoteActive?e.remote.y:e.y,n=e.remoteActive?e.remote.x:e.x,o=t.findIndex(e=>pa({x:e.x,y:e.y,w:e.w,h:e.h},{x:n,y:s,w:r,h:a}));return e.remoteActive?La(La({},e),{},o>=0?{items:["SAVE_GAME","WATCHER","MESSAGE","LEVEL"].includes(t[o].type)?e.items:[...e.items,t[o]],remote:La(La({},e.remote),{},{hasHitItem:o})}:{remote:La(La({},e.remote),{},{hasHitItem:-1})}):La(La({},e),{},o>=0?{items:["SAVE_GAME","WATCHER","MESSAGE","LEVEL"].includes(t[o].type)?e.items:[...e.items,t[o]],hasHitItem:o}:{hasHitItem:-1})}},Ya=(e,t,r)=>{var[,,a,s]=r;return t.level[t.player.currentScreen].objects.some(t=>{var[r,n,o,i]=t;return pa({x:Math.floor(e.x+e.velX),y:e.y,w:a,h:s},{x:r,y:n,w:o,h:i})})?e.x:e.x+e.velX},Ma=(e,t,r)=>{var[,,a,s]=r;return t.level[t.player.currentScreen].objects.some(t=>{var[r,n,o,i]=t;return pa({y:Math.floor(e.y+e.velY),x:e.x,w:a,h:s},{x:r,y:n,w:o,h:i})})?e.y:e.y+e.velY},ja=(e,t)=>{var[,,r,a]=e;return e=>{if(e.remote){var r=Sa[e.remote.state][Math.floor(e.remote.spriteCount)],a=Sa[e.remote.state].length,s=e.remote.spriteCount+.35<a&&!(e.remote.spriteCount>=a)?e.remote.spriteCount+.35:0;return s>=12&&e.remote.state.startsWith("PLAYER_SUMMON_WATCHER")?La(La({},e),{},{remoteActiveDone:!0,remote:La(La({},e.remote),{},{x:e.faces===pr?e.remote.x:e.remote.x+50,spriteCount:0,state:e.faces===pr?"PLAYER_WATCHER_IDLE_LEFT":"PLAYER_WATCHER_IDLE_RIGHT"})}):La(La({},e),{},{hp:t.level[e.currentScreen].enemies.some(t=>pa({x:t.x-5,y:t.y+5,w:t.w+10,h:t.h+10},{x:e.remote.x,y:e.remote.y,w:r[2],h:r[3]}))?e.hp-1:e.hp,remote:La(La({},e.remote),{},{x:Ya(e.remote,t,r),y:Ma(e.remote,t,r),spriteCount:s})})}}},Da=e=>e.hp<=0?La(La({},e),{},{death:!0,state:"PLAYER_".concat(e.specialState,"DEATH_").concat(e.faces===pr?"LEFT":"RIGHT"),spriteCount:0}):e,Ha=e=>{var{state:t,assets:r}=e,a=Sa[t.player.state].length,s=t.player.state.includes("JUMP")?t.player.spriteCount+.35<a&&!(t.player.spriteCount>=a)?t.player.spriteCount+.35:5:t.player.spriteCount+.35<a&&!(t.player.spriteCount>=a)?t.player.spriteCount+.35:0;if(t.player.death&&t.player.spriteCount>=a-1)return{assets:r,state:La(La({},t),{},{mode:"MODE_GAME_OVER"})};if(t.player.death)return{assets:r,state:La(La({},t),{},{player:La(La({},t.player),{},{spriteCount:s})})};if(t.player.state.includes("HURT")&&t.player.spriteCount>=a-1)return{assets:r,state:La(La({},t),{},{player:La(La({},t.player),{},{state:t.player.faces===pr?"PLAYER_".concat(t.player.specialState,"IDLE_LEFT"):"PLAYER_".concat(t.player.specialState,"IDLE_RIGHT"),spriteCount:0})})};if(t.player.state.includes("HURT")&&t.player.spriteCount<a)return{assets:r,state:La(La({},t),{},{player:La(La({},t.player),{},{spriteCount:s,y:t.player.y-.5,x:t.player.faces===pr?t.player.x+8:t.player.x-8})})};if(t.player.state.startsWith("PLAYER_SUMMON"))return t.player.spriteCount>=12?{assets:r,state:La(La({},t),{},{player:La(La({},t.player),{},{spriteCount:0,state:t.player.faces===pr?"PLAYER_IDLE_LEFT":"PLAYER_IDLE_RIGHT",remote:La(La({},t.player.remote),{},{x:t.player.faces===pr?t.player.x-100:t.player.x+100,y:t.player.y,spriteCount:0,faces:t.player.faces===pr?pr:"PLAYER_FACES_RIGHT",state:t.player.faces===pr?"PLAYER_SUMMON_WATCHER_LEFT":"PLAYER_SUMMON_WATCHER_RIGHT"})})})}:{assets:r,state:La(La({},t),{},{player:La(La({},t.player),{},{spriteCount:s})})};if(t.player.isShooting)return{state:Ra(t,t.player),assets:r};if(t.player.remote.spriteCount>=15&&t.player.remote.state.startsWith("PLAYER_WATCHER_ATTACK"))return{state:wa(t,t.player),assets:r};var n=La(La({},t.player),{},{grounded:!1,spriteCount:s});return{state:La(La({},t),{},{player:yr(Da,ja(Sa[n.remote.state][Math.floor(n.remote.spriteCount)],t),Ca(Sa[n.state][Math.floor(n.spriteCount)],t.level[n.currentScreen].items),Ia(t,Sa[n.state][Math.floor(n.spriteCount)],t.level[n.currentScreen].enemies.filter(e=>["TYPE_1"].includes(e.type))),ma,Pa,e=>e.grounded?La(La({},e),{},{velY:0}):e,ya(Sa[n.state][Math.floor(n.spriteCount)],[...t.level[n.currentScreen].enemies.filter(e=>["TYPE_1"].includes(e.type)).map(e=>[e.x,e.y,e.w,e.h]),...t.level[n.currentScreen].objects,...t.level[n.currentScreen].actionItems.filter(e=>"laser"!==e.type&&"DOOR"!==e.img).map(e=>[e.x,e.y,e.w,e.h])]),la)(n)}),assets:r}};function Fa(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,a)}return r}function Ga(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?Fa(Object(r),!0).forEach((function(t){ir()(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):Fa(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}var Na=e=>{var{state:t,assets:r}=e;return"MODE_MENU"===t.mode?{state:Ga(Ga({},t),{},{layers:t.layers.map((e,t)=>Ga(Ga({},e),{},{x:Math.abs(e.x)>r[t].width?0:e.x+e.speed}))}),assets:r}:{state:t,assets:r}};function ka(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,a)}return r}function Ua(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?ka(Object(r),!0).forEach((function(t){ir()(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):ka(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}var Xa=e=>{var{state:t,assets:r}=e;return{state:Ua(Ua({},t),{},{noiseCount:t.noiseCount+1>3?0:t.noiseCount+1,msg:t.text[t.mode].message.substring(0,t.msg.length+1),fps:20}),assets:r}};function Wa(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,a)}return r}function Ka(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?Wa(Object(r),!0).forEach((function(t){ir()(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):Wa(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}var Va={shot:66,explosion:68,remote:65,uiMove:69,background:10},Ba=e=>{var{state:t,assets:r}=e,a=Object.entries(t.audio).reduce((e,t)=>{var[a,s]=t;return s&&!(e=>e&&e.currentTime>0&&!e.paused&&!e.ended&&e.readyState>2)(r[Va[a]])&&(r[Va[a]].play(),["shot","explosion","remote"].includes(a))?Ka(Ka({},e),{},{[a]:!1}):Ka(Ka({},e),{},{[a]:s})},{});return{assets:r,state:Ka(Ka({},t),{},{audio:a})}},Ja=e=>{var{state:t,assets:r}=e;if("MODE_PLAY_GAME"===t.mode){if("true"===localStorage.getItem("load")){var a=JSON.parse(localStorage.getItem("state"));return localStorage.setItem("load","false"),{state:a,assets:r}}return yr(Ha,_a,sa,Ba)({state:t,assets:r})}return"MODE_MENU"===t.mode?Na({state:t,assets:r}):[...Object.keys(t.text)].includes(t.mode)?Xa({state:t,assets:r}):{state:t,assets:r}};function za(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,a)}return r}function qa(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?za(Object(r),!0).forEach((function(t){ir()(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):za(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}var $a=e=>{var t,r=(()=>{var e={},t={},r={},a={};document.addEventListener("keyup",e=>Object.assign(t,Zr(Zr({},t),{},{[e.key]:!0})));return document.addEventListener("keyup",e=>{Object.assign(r,Zr(Zr({},r),{},{[e.key]:!1})),Object.assign(a,Zr(Zr({},a),{},{[e.key]:!1}))}),document.addEventListener("keydown",e=>{a[e.key]||r[e.key]?Object.assign(a,Zr(Zr({},a),{},{[e.key]:!1})):a[e.key]||r[e.key]||(Object.assign(r,Zr(Zr({},r),{},{[e.key]:!0})),Object.assign(a,Zr(Zr({},a),{},{[e.key]:!0})))}),document.addEventListener("keydown",t=>Object.assign(e,Zr(Zr({},e),{},{[t.key]:!0}))),document.addEventListener("keyup",t=>Object.assign(e,Zr(Zr({},e),{},{[t.key]:!1}))),{getKeys:()=>e,getSpecialKeys:()=>a,getStopKeys:()=>{var e=Zr({},t);return t={},e},clear(){t={}}}})(),a=Ir(e),s=t=>{setTimeout(()=>{var n,{state:o}=yr((n=r,e=>{var{state:t,assets:r}=e;return{state:ea.get(t.mode)(n,t),assets:r}}),Ja)({state:t,assets:e});a.get(o.mode)(o),requestAnimationFrame(()=>s(o))},1e3/t.fps)};s(qa(qa({},wr),{},{isLoading:(t=wr.isLoading,document.querySelector("#loading").style.zIndex="-1000",!t)}))};Promise.all(nr).then($a)}]),[[153,1,2]]]);
//# sourceMappingURL=main.2fd8f9755f21b9ece104.js.map